<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Moon Game Settings</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/game_settings.css') }}">
</head>
<body>
  <h1>Game Settings</h1>

  <div class="settings-container">
    <h3>Board Selection</h3>
    <p id="boardFallbackNotice">No custom boards uploaded. The default 5x5 board will be used.</p>
    
    <div id="boardPreviewContainer"></div>

    <!-- Hidden file input and Add tile trigger -->
    <input type="file" id="boardUpload" accept=".json" multiple hidden>
    <div id="addBoardTile">➕ Add Boards</div>

    <div class="center">
      <button id="clearBoardsBtn" class="danger-button">🗑️ Clear All Boards</button>
    </div>

    <div id="deck-settings">
      <h3>Deck Settings</h3>

      <p class="settings-note">
    <strong>Note:</strong> If a board has custom deck settings enabled, those will override the global deck settings. Otherwise, the global settings apply.
  </p>

      <label>
        <input type="radio" name="deckType" value="infinite" checked>
        Infinite deck
      </label><br>
      <label>
        <input type="radio" name="deckType" value="finite">
        Finite deck
      </label>

      <div id="finite-options">
        <label>
          Copies of each phase:
          <input type="number" id="copiesPerPhase" value="2" min="1">
        </label>
      </div>
    </div>

    <div id="info">
      <p id="boardInfo"></p>
      <p id="deckInfo"></p>
    </div>

    <div id="warnings">
      <p id="warning"></p>
    </div>

    <div id="startGameWarning">
      <p id="startWarning"></p>
    </div>

    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="links" class="center"></div>

  <div id="boardModal">
    <div>
      <button onclick="closeBoardModal()">❌</button>
      <canvas id="modalBoardCanvas" width="500" height="500"></canvas>
    </div>
  </div>

  <script src="{{ url_for('static', filename='game_settings.js') }}"></script>
</body>
</html>

